l>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trainings Timer</title>

<link rel="manifest" href="manifest.json">

<style>
body {
  font-family: -apple-system, BlinkMacSystemFont, sans-serif;
  background: #f7f7f7;
  padding: 20px;
  text-align: center;
}
h1 { margin-bottom: 10px; }
select, input {
  font-size: 1em;
  padding: 5px;
  margin: 4px;
}
#exercise {
  font-size: 1.4em;
  margin: 20px 0;
}
#timer {
  font-size: 3em;
  margin: 20px 0;
}
button {
  font-size: 1.1em;
  padding: 10px 20px;
  margin: 5px;
}
.exercise-input {
  display: block;
  margin: 3px auto;
  width: 80%;
}
</style>
</head>

<body>

<h1>Trainings Timer</h1>

<select id="day" onchange="loadDay()">
  <option>Maandag</option>
  <option>Dinsdag</option>
  <option>Woensdag</option>
  <option>Donderdag</option>
  <option>Vrijdag</option>
  <option>Zaterdag</option>
  <option>Zondag</option>
</select>

<div>
  Werk (sec): <input id="werk" type="number" value="40">
  Rust (sec): <input id="rust" type="number" value="20"><br>
  Rondes: <input id="rondes" type="number" value="1">
</div>

<h3>Oefeningen</h3>
<div id="exerciseList"></div>

<div id="exercise">Klaar om te starten</div>
<div id="timer">00:00</div>

<button onclick="startTimer()">Start</button>
<button onclick="pauseTimer()">Pauze</button>
<button onclick="resetTimer()">Reset</button>

<script>
let schema = [];
let index = 0;
let ronde = 1;
let fase = "werk";
let resterend = 0;
let interval = null;

function beep() {
  const ctx = new AudioContext();
  const osc = ctx.createOscillator();
  osc.connect(ctx.destination);
  osc.frequency.value = 800;
  osc.start();
  osc.stop(ctx.currentTime + 0.15);
}

function vibrate() {
  if (navigator.vibrate) navigator.vibrate(200);
}

function renderExerciseInputs(names = ["Oefening 1","Oefening 2","Oefening 3"]) {
  exerciseList.innerHTML = "";
  names.forEach((n,i) => {
    const input = document.createElement("input");
    input.className = "exercise-input";
    input.value = n;
    input.placeholder = "Oefening " + (i+1);
    exerciseList.appendChild(input);
  });
}

function saveDay() {
  const d = day.value;
  const names = [...document.querySelectorAll(".exercise-input")].map(i => i.value);
  localStorage.setItem(d, JSON.stringify({
    werk: werk.value,
    rust: rust.value,
    rondes: rondes.value,
    oefeningen: names
  }));
}

function loadDay() {
  const d = day.value;
  const data = JSON.parse(localStorage.getItem(d));
  if (data) {
    werk.value = data.werk;
    rust.value = data.rust;
    rondes.value = data.rondes;
    renderExerciseInputs(data.oefeningen);
  } else {
    renderExerciseInputs();
  }
}

function buildSchema() {
  schema = [];
  document.querySelectorAll(".exercise-input").forEach(i => {
    if (i.value.trim() !== "") {
      schema.push({ naam: i.value });
    }
  });
}

function startTimer() {
  if (interval) return;
  saveDay();
  if (schema.length === 0) buildSchema();
  if (schema.length === 0) return alert("Geen oefeningen ingevoerd");
  if (resterend === 0) startWerk();
  interval = setInterval(tik, 1000);
}

function pauseTimer() {
  clearInterval(interval);
  interval = null;
}

function resetTimer() {
  pauseTimer();
  index = 0;
  ronde = 1;
  fase = "werk";
  resterend = 0;
  schema = [];
  exercise.textContent = "Klaar om te starten";
  timer.textContent = "00:00";
}

function startWerk() {
  fase = "werk";
  resterend = Number(werk.value);
  exercise.textContent =
    schema[index].naam + " – WERK (ronde " + ronde + ")";
  beep(); vibrate();
}

function startRust() {
  fase = "rust";
  resterend = Number(rust.value);
  exercise.textContent =
    schema[index].naam + " – RUST";
  beep(); vibrate();
}

function tik() {
  resterend--;
  updateTimer();
  if (resterend <= 0) {
    if (fase === "werk") {
      startRust();
    } else {
      index++;
      if (index >= schema.length) {
        index = 0;
        ronde++;
        if (ronde > rondes.value) {
          resetTimer();
          alert("Training klaar!");
          beep(); vibrate();
        } else {
          startWerk();
        }
      } else {
        startWerk();
      }
    }
  }
}

function updateTimer() {
  const m = Math.floor(resterend / 60).toString().padStart(2, "0");
  const s = (resterend % 60).toString().padStart(2, "0");
  timer.textContent = `${m}:${s}`;
}

loadDay();
</script>

</body>
</html>




  
